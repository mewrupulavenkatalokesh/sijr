<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Homemade Products</title>
<style>
  body { font-family: Arial; margin:0; padding:0; background: linear-gradient(135deg,#fceabb,#f8b500);}
  header{background:#4CAF50;color:white;text-align:center;padding:25px;font-size:28px;}
  .products { width: 90%; margin: 20px auto; display:flex; flex-wrap:wrap; gap:20px; justify-content:center; }
  .product { background:white; border-radius:15px; width:250px; text-align:center; padding:15px; box-shadow:0 4px 10px rgba(0,0,0,0.2); position:relative; }
  .product img{width:100%; border-radius:15px;}
  .product h3{margin:15px 0 10px;}
  .price{color:#e91e63;font-weight:bold;margin:10px 0;}
  select, input, textarea{padding:5px;border-radius:5px;border:1px solid #ccc;margin:5px 0;width:90%;}
  button{padding:8px 15px;background:#4CAF50;color:white;border:none;border-radius:5px;cursor:pointer;}
  button:hover{background:#45a049;}
  .hidden{display:none;}

  /* Floating admin panel */
  #adminPanel { position:fixed; right:0; top:80px; width:350px; max-height:80%; overflow:auto; background:rgba(255,255,255,0.95); border-radius:15px; padding:15px; box-shadow:0 4px 10px rgba(0,0,0,0.3);}
</style>
</head>
<body>

<header>Homemade Products</header>

<!-- Admin Login -->
<div style="text-align:center; margin:20px;">
  <input type="password" id="adminPassword" placeholder="Enter Admin Password">
  <button onclick="adminLogin()">Login as Admin</button>
</div>

<!-- Admin Panel -->
<div id="adminPanel" class="hidden">
  <h3>Admin Panel - Update Prices</h3>
  <table id="adminTable" border="1" style="width:100%; border-collapse: collapse; text-align:center;">
    <thead>
      <tr>
        <th>Product</th><th>Qty1</th><th>Price1</th><th>Qty2</th><th>Price2</th><th>Qty3</th><th>Price3</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <button onclick="updateProductsFromAdmin()">Update Products</button>
</div>

<!-- Customer Products -->
<section class="products" id="products"></section>

<!-- Order Form Modal -->
<div id="orderModal" class="hidden" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;">
  <div style="background:white;padding:20px;border-radius:15px;width:350px;position:relative;">
    <h3>Place Your Order</h3>
    <form id="orderForm">
      <input type="text" id="customerName" placeholder="Full Name" required><br>
      <input type="email" id="customerEmail" placeholder="Email" required><br>
      <input type="tel" id="customerPhone" placeholder="Phone" required><br>
      <input type="text" id="customerPincode" placeholder="Pincode" required><br>
      <input type="text" id="customerMandal" placeholder="Mandal" required><br>
      <input type="text" id="customerDistrict" placeholder="District" required><br>
      <input type="text" id="customerState" placeholder="State" required><br>
      <p id="selectedProduct"></p>
      <p id="selectedPrice"></p>
      <button type="submit">Submit Order</button>
      <button type="button" onclick="closeOrderModal()">Cancel</button>
    </form>
  </div>
</div>

<script>
let products = [
  { name: "Pippalu", priceOptions: {"100g":100,"200g":200,"500g":450} },
  { name: "Murukulu", priceOptions: {"100g":60,"200g":120,"500g":300} }
];

const productsContainer = document.getElementById("products");
const adminPanel = document.getElementById("adminPanel");

// Admin login
function adminLogin(){
  const pw = document.getElementById("adminPassword").value;
  if(pw === "admin123"){
    adminPanel.classList.remove("hidden");
    renderAdminTable();
    alert("Admin Panel Opened!");
  }else alert("Wrong Password!");
}

// Render customer products
function renderProducts(){
  productsContainer.innerHTML = "";
  products.forEach((p,index)=>{
    const div = document.createElement("div");
    div.className="product";
    const options = Object.keys(p.priceOptions).map(q=>`<option value="${q}">${q}</option>`).join("");
    div.innerHTML = `
      <h3>${p.name}</h3>
      <select id="qty-${index}">${options}</select>
      <p class="price" id="price-${index}">₹${p.priceOptions[Object.keys(p.priceOptions)[0]]}</p>
      <button onclick="openOrderModal(${index})">Order</button>
    `;
    productsContainer.appendChild(div);
    document.getElementById(`qty-${index}`).addEventListener("change",()=>{
      const sel = document.getElementById(`qty-${index}`).value;
      document.getElementById(`price-${index}`).innerText = `₹${p.priceOptions[sel]}`;
    });
  });
}

// Admin Table
function renderAdminTable(){
  const tbody = document.querySelector("#adminTable tbody");
  tbody.innerHTML = "";
  products.forEach((p,index)=>{
    const keys = Object.keys(p.priceOptions);
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${p.name}</td>
      <td><input type="text" value="${keys[0]||''}" data-index="${index}" data-type="qty1"></td>
      <td><input type="number" value="${p.priceOptions[keys[0]]||''}" data-index="${index}" data-type="price1"></td>
      <td><input type="text" value="${keys[1]||''}" data-index="${index}" data-type="qty2"></td>
      <td><input type="number" value="${p.priceOptions[keys[1]]||''}" data-index="${index}" data-type="price2"></td>
      <td><input type="text" value="${keys[2]||''}" data-index="${index}" data-type="qty3"></td>
      <td><input type="number" value="${p.priceOptions[keys[2]]||''}" data-index="${index}" data-type="price3"></td>
    `;
    tbody.appendChild(row);
  });
}

// Update products from admin
function updateProductsFromAdmin(){
  const inputs = document.querySelectorAll("#adminTable input");
  inputs.forEach(input=>{
    const i = input.dataset.index;
    const type = input.dataset.type;
    if(!products[i].priceOptions) products[i].priceOptions={};
    if(type.startsWith("qty")){
      const priceKey = "price"+type.slice(3);
      const priceInput = document.querySelector(`#adminTable input[data-index='${i}'][data-type='${priceKey}']`);
      if(input.value && priceInput.value) products[i].priceOptions[input.value]=Number(priceInput.value);
    }
  });
  renderProducts();
  alert("Products Updated!");
}

// Order Modal
let currentIndex=0;
function openOrderModal(index){
  currentIndex=index;
  document.getElementById("orderModal").classList.remove("hidden");
  const sel = document.getElementById(`qty-${index}`).value;
  document.getElementById("selectedProduct").innerText = products[index].name + " - " + sel;
  document.getElementById("selectedPrice").innerText = "₹"+products[index].priceOptions[sel];
}
function closeOrderModal(){document.getElementById("orderModal").classList.add("hidden");}

// Submit order
document.getElementById("orderForm").addEventListener("submit", function(e){
  e.preventDefault();
  const name=document.getElementById("customerName").value;
  const email=document.getElementById("customerEmail").value;
  const phone=document.getElementById("customerPhone").value;
  const pincode=document.getElementById("customerPincode").value;
  const mandal=document.getElementById("customerMandal").value;
  const district=document.getElementById("customerDistrict").value;
  const state=document.getElementById("customerState").value;
  const product=document.getElementById("selectedProduct").innerText;
  const price=document.getElementById("selectedPrice").innerText;
  
  alert(`New Order:\n${name}\n${email}\n${phone}\n${pincode}, ${mandal}, ${district}, ${state}\n${product} - ${price}`);
  closeOrderModal();
});

renderProducts();
</script>

</body>
</html>
